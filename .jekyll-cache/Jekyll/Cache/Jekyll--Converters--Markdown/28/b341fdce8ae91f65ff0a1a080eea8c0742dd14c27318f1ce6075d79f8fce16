I".`<p>现在网上很多免费的空间，服务器，有的是因为在国外，有的是流量和存储有限制。因此，使用七牛云存储的免费流量和空间，加速网站加载速度。&lt;/p&gt;<p>可以参考这篇文章：<a href="http://www.liubaicai.net/articles/731">http://www.liubaicai.net/articles/731</a>，介绍了自定义编辑框插件，图片上传到某地的方法。下面介绍了ruby服务后台的操作。&lt;/p&gt;<p>七牛云提供了ruby的SDK。&lt;/p&gt;<pre>gem 'qiniu'</pre><pre>bundle install</pre><p><span style="color: rgb(102, 110, 128); font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif;">登录七牛开发者平台，查看&nbsp;</span><font color="#238efa" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif">Access Key 和 Secret Key</font></p><p><span style="color: rgb(102, 110, 128); font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif;">初始化环境，并且设置默认的 ACCESS_KEY 和 SECRET_KEY：&lt;/span&gt;&lt;/p&gt;<pre>require 'qiniu'

Qiniu.establish_connection! :access_key =&gt; '<your_app_access_key>',
                            :secret_key =&gt; '<your_app_secret_key>'</your_app_secret_key></your_app_access_key></pre><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif">如果是在rails中，可以在初始化文件中添加&lt;/font&gt;<em style="font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif; color: rgb(102, 110, 128);">YOUR_RAILS_APP/config/initializers/qiniu_sdk.rb</em>&lt;/p&gt;<p><em style="font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif; color: rgb(102, 110, 128);"><br /></em></p><h3>文件上传</h3><p><br /></p><h4>直接上传</h4><p><br /></p><pre>require 'qiniu'

# 构建鉴权对象
Qiniu.establish_connection! :access_key =&gt; 'Access_Key',
                            :secret_key =&gt; 'Secret_Key'

#要上传的空间
bucket = 'Bucket_Name'

#上传到七牛后保存的文件名
key = 'my-ruby-logo.png'


#构建上传策略
put_policy = Qiniu::Auth::PutPolicy.new(
    bucket,      # 存储空间
    key,     # 最终资源名，可省略，即缺省为“创建”语义，设置为nil为普通上传 
    3600    #token过期时间，默认为3600s
)

#生成上传 Token
uptoken = Qiniu::Auth.generate_uptoken(put_policy)

#要上传文件的本地路径
filePath = './ruby-logo.png'

#调用upload_with_token_2方法上传
code, result, response_headers = Qiniu::Storage.upload_with_token_2(
     uptoken, 
     filePath,
     key
)

#打印上传返回的信息
puts code
puts result</pre><h4>文件下载</h4><p><br /></p><pre>require 'qiniu'

Qiniu.establish_connection! :access_key =&gt; 'AK',
                            :secret_key =&gt; 'SK'

#构建私有空间的链接
primitive_url = 'http://domain/key'
download_url = Qiniu::Auth.authorize_download_url(primitive_url)
puts download_url</pre><p>对于public显示的文件，也可以直接拼出地址下载。&lt;/p&gt;<h3>图片裁剪缩放</h3><p><br /></p><p>接口规格</p><pre>imageView2/<mode>/w/<longedge>
                /h/<shortedge>
               /format/<format>
              /interlace/<interlace>
             /q/<quality>
            /ignore-error/<ignoreerror></ignoreerror></quality></interlace></format></shortedge></longedge></mode></pre><p>例如，生成一张200x200的缩略图：&lt;/p&gt;<pre>http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpg?imageView2/1/w/200/h/200</pre><p><img src="http://78re52.com1.z0.glb.clouddn.com/resource/gogopher.jpg?imageView2/1/w/200/h/200" style="width: 200px;" /></p><p style="font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif; color: rgb(102, 110, 128); line-height: 1.6;">其中&nbsp;<code class="prettyprint" style="font-family: 'Alright Sans LP', 'Avenir Next', 'Helvetica Neue', Helvetica, Arial, 'PingFang SC', 'Source Han Sans SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi MicroHei', sans-serif; font-size: 13px;">&lt;mode&gt;</code>&nbsp;分为如下几种情况：&amp;nbsp;</p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">模式<span class="Apple-tab-span" style="white-space: pre;">	</span>说明</span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/0/w/&lt;LongEdge&gt;/h/&lt;ShortEdge&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的长边最多为&lt;LongEdge&gt;，短边最多为&lt;ShortEdge&gt;，进行等比缩放，不裁剪。如果只指定 w 参数则表示限定长边（短边自适应），只指定 h 参数则表示限定短边（长边自适应）。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/1/w/&lt;Width&gt;/h/&lt;Height&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的宽最少为&lt;Width&gt;，高最少为&lt;Height&gt;，进行等比缩放，居中裁剪。转后的缩略图通常恰好是 &lt;Width&gt;x&lt;Height&gt; 的大小（有一个边缩放的时候会因为超出矩形框而被裁剪掉多余部分）。如果只指定 w 参数或只指定 h 参数，代表限定为长宽相等的正方图。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/2/w/&lt;Width&gt;/h/&lt;Height&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的宽最多为&lt;Width&gt;，高最多为&lt;Height&gt;，进行等比缩放，不裁剪。如果只指定 w 参数则表示限定宽（长自适应），只指定 h 参数则表示限定长（宽自适应）。它和模式0类似，区别只是限定宽和高，不是限定长边和短边。从应用场景来说，模式0适合移动设备上做缩略图，模式2适合PC上做缩略图。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/3/w/&lt;Width&gt;/h/&lt;Height&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的宽最少为&lt;Width&gt;，高最少为&lt;Height&gt;，进行等比缩放，不裁剪。如果只指定 w 参数或只指定 h 参数，代表长宽限定为同样的值。你可以理解为模式1是模式3的结果再做居中裁剪得到的。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/4/w/&lt;LongEdge&gt;/h/&lt;ShortEdge&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的长边最少为&lt;LongEdge&gt;，短边最少为&lt;ShortEdge&gt;，进行等比缩放，不裁剪。如果只指定 w 参数或只指定 h 参数，表示长边短边限定为同样的值。这个模式很适合在手持设备做图片的全屏查看（把这里的长边短边分别设为手机屏幕的分辨率即可），生成的图片尺寸刚好充满整个屏幕（某一个边可能会超出屏幕）。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/5/w/&lt;LongEdge&gt;/h/&lt;ShortEdge&gt;<span class="Apple-tab-span" style="white-space:pre">	</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">限定缩略图的长边最少为&lt;LongEdge&gt;，短边最少为&lt;ShortEdge&gt;，进行等比缩放，居中裁剪。如果只指定 w 参数或只指定 h 参数，表示长边短边限定为同样的值。同上模式4，但超出限定的矩形部分会被裁剪。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">注意：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">可以仅指定w参数或h参数。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">新图的宽/高/长边/短边，不会比原图大，即本接口总是缩小图片。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">所有模式都可以只指定w参数或只指定h参数，并获得合理结果。在w、h为限定最大值时，未指定某参数等价于将该参数设置为无穷大（自适应）；在w、h为限定最小值时，未指定参数等于给定的参数，也就限定的矩形是正方形。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">处理后的图片单边最长不得超过9999，宽和高的乘积最大不得超过2500万。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">处理前的图片w和h参数不能超过3万像素，总像素不能超过1亿5000万像素。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">参数名称<span class="Apple-tab-span" style="white-space:pre">	</span>必填<span class="Apple-tab-span" style="white-space:pre">	</span>说明</span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/format/&lt;Format&gt;<span class="Apple-tab-span" style="white-space:pre">		</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">新图的输出格式&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">取值范围：jpg，gif，png，webp等，默认为原图格式。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">参考支持转换的图片格式。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/interlace/&lt;Interlace&gt;<span class="Apple-tab-span" style="white-space:pre">		</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">是否支持渐进显示</span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">取值范围：1 支持渐进显示，0不支持渐进显示(默认为0)。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">适用目标格式：jpg</span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">效果：网速慢时，图片显示由模糊到清晰。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/q/&lt;Quality&gt;<span class="Apple-tab-span" style="white-space:pre">		</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">新图的图片质量&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">取值范围是[1, 100]，默认75。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">七牛会根据原图质量算出一个修正值，取修正值和指定值中的小值。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">注意：&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 如果图片的质量值本身大于90，会根据指定值进行处理，此时修正值会失效。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 指定值后面可以增加 !，表示强制使用指定值，如100!。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 支持图片类型：jpg。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">/ignore-error/&lt;ignoreError&gt;<span class="Apple-tab-span" style="white-space:pre">		</span></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">可选&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">取值：1</span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 未设置此参数时，正常返回处理结果。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 设置了此参数时，若图像处理的结果失败，则返回原图。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">● 设置了此参数时，若图像处理的结果成功，则正常返回处理结果。&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;<p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;"><br /></span></font></p><p><font color="#666e80" face="Alright Sans LP, Avenir Next, Helvetica Neue, Helvetica, Arial, PingFang SC, Source Han Sans SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi MicroHei, sans-serif"><span style="line-height: 22.4px;">&lt;Quality&gt;修正值算法：min[90, 原图quality*sqrt(原图长宽乘积/结果图片长宽乘积)]</span></font></p><p><br />更多方法参考文档：<a href="http://developer.qiniu.com/code/v6/sdk/ruby.html">http://developer.qiniu.com/code/v6/sdk/ruby.html</a></p>
</span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></span></font></p></p></p></font></p></span></p></p></p></p>
:ET